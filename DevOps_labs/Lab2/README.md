<h1 align="center">Лабораторная работа 2</h1>

### Цель работы
Написать два Dockerfile – плохой и хороший. Плохой должен запускаться и работать корректно, но в нём должно быть не менее 3 “bad practices”.
В хорошем Dockerfile они должны быть исправлены. Также привести 2 плохие практики по использованию хорошего контейнера.

### Предисловие
Было решено контейнеризировать веб-приложение, созданное с помощью Django Framework.
В качестве HTTP-сервера для нашего приложения был выбран Gunicorn.

### Плохие практики (добавить ссылки якори)
* #### [Избыточность](#Избыточность)

  Использование образа ubuntu, вместо более подходящего для нашей цели образа python.
* #### [Использование `:latest` версий](#Избыточность)

  Нарушает неизменность контейнера, так как обновление образа может привести к ошибке.
* #### [Копирование всех файлов одной командой](#COPY)

  Может плохо сказаться на производительности контейнера. 

## Глава 1. Плохой Докер.

### Часть 1. Подготовка Django-проекта
Для начала создадим папку с пустым Dockerfile-ом и файлом         `requirements.txt`, в который запишем требуемые для установки библиотеки Python.

![Создание файла requirements.txt](./images/requirements.png)

Далее создаём виртуальное окружение Python и активируем его. С помощью команды `django-admin startproject -v 3 Docker .` создаём приложение Django с именем Docker.

![Создание приложения Django](./images/make-django-project(2).png)

Создаём файл .dockerignore, в который добавляем:
* db.sqlite — база данных проекта. 
* venv — папка с виртуальным окружением
* \_\_pycache\_\_ — папка с байткодом python модулей/приложений


![Создание .dockerignore](./images/dockerignore(3).png)

### Часть 2. Работа с Docker
Пишем инструкции в Dockerfile.
<a name="Избыточность">Подключаем образ `ubuntu:latest`</a> (bad practice #1, #2)

Устанавливаем `python3` и `pip`.

<a name="COPY">Копируем файлы из нашей директории в контейнер.</a> (bad practice #3)

С помощью `pip` устанавливаем библиотеки из файла 'requirements.txt'

Производим миграции в БД.

С помощью команды `CMD`, которая вызывается в начале работы контейнера, поднимаем сервер gunicorn.
Открываем порт 8000 командой `EXPOSE 8000`.

![Заполнение Dockerfile](./images/Dockerfile(4).png)

Билдим наш Dockerfile в образ "django".

![Build Dockerfile](./images/docker-build(5).png)

Поднимаем контейнер командой `docker run`, при этом с помощью параметра `p` открываем порт 8000.

![Run Dockerfile](./images/docker-run(7).png)

На хосте переходим по 127.0.0.1:8000 и видим поднятый сервер.


![Результат](./images/django-successful(10).png)


## Глава 2. Хороший Докер.



